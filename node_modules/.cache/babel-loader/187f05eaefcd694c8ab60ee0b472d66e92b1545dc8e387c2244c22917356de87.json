{"ast":null,"code":"var _jsxFileName = \"/home/ewangclarks/Documents/Projects/Technical Interview/hk-sar-react/src/components/checkin/context/CheckInContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axiosApi from \"../config/axios.client\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CheckInContext = /*#__PURE__*/React.createContext(null);\nexport const CheckInProvider = props => {\n  _s();\n  const [error, setError] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  const [alert, setAlert] = React.useState('');\n  const [toggleSignIn, setToggleSignIn] = useState(true);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const switchCheckIn = value => {\n    setError(false);\n    setSuccess(false);\n    setToggleSignIn(value);\n  };\n  const login = async user => {\n    var _location$state, _location$state$from;\n    let from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || '/home';\n    try {\n      console.log(JSON.stringify(user));\n      const resp = await axiosApi({\n        'method': 'POST',\n        'url': \"api/public/login\",\n        data: user\n      });\n      const auth = await resp.data;\n      localStorage.setItem('token', 'Bearer ' + auth.accessToken);\n      localStorage.setItem('expiresIn', auth.expiresIn);\n      localStorage.setItem('user', JSON.stringify(auth.userDetails));\n      navigate(from, {\n        replace: true\n      });\n    } catch (error) {\n      setAlert(\"Invalid credentials\");\n      setError(true);\n    }\n  };\n  const register = async user => {\n    try {\n      const resp = await axiosApi({\n        'method': 'POST',\n        'url': \"api/public/register\",\n        data: user\n      });\n      setAlert(\"Your account was created successfully\");\n      setSuccess(true);\n      setToggleSignIn(true);\n    } catch (err) {\n      setAlert(\"Failed to create account!Please try again later\");\n      setError(true);\n    }\n  };\n  const resetAlert = () => {\n    setAlert('');\n    setSuccess(false);\n    setError(false);\n  };\n  const checkIn = {\n    error,\n    success,\n    alert,\n    toggleSignIn,\n    switchCheckIn,\n    login,\n    register,\n    resetAlert\n  };\n  return /*#__PURE__*/_jsxDEV(CheckInContext.Provider, {\n    value: checkIn,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(CheckInProvider, \"SgSLudvVDi+Zx4SgWnvP6eYFhwQ=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = CheckInProvider;\nexport const useCheckInProps = () => {\n  _s2();\n  return React.useContext(CheckInContext);\n};\n_s2(useCheckInProps, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CheckInProvider\");","map":{"version":3,"names":["React","useState","axiosApi","useLocation","useNavigate","jsxDEV","_jsxDEV","CheckInContext","createContext","CheckInProvider","props","_s","error","setError","success","setSuccess","alert","setAlert","toggleSignIn","setToggleSignIn","navigate","location","switchCheckIn","value","login","user","_location$state","_location$state$from","from","state","pathname","console","log","JSON","stringify","resp","data","auth","localStorage","setItem","accessToken","expiresIn","userDetails","replace","register","err","resetAlert","checkIn","Provider","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCheckInProps","_s2","useContext","$RefreshReg$"],"sources":["/home/ewangclarks/Documents/Projects/Technical Interview/hk-sar-react/src/components/checkin/context/CheckInContext.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport axiosApi from \"../config/axios.client\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\n\nconst CheckInContext = React.createContext(null);\n\nexport const CheckInProvider = (props) => {\n\n    const [error, setError] = React.useState(false);\n    const [success, setSuccess] = React.useState(false);\n    const [alert, setAlert] = React.useState('');\n    const [toggleSignIn, setToggleSignIn] = useState(true);\n\n    const navigate = useNavigate();\n    const location = useLocation();\n\n\n    const switchCheckIn = (value) => {\n        setError(false);\n        setSuccess(false);\n        setToggleSignIn(value);\n    }\n\n    const login = async (user) => {\n        let from = location.state?.from?.pathname || '/home';\n        try {\n            console.log(JSON.stringify(user));\n            const resp = await axiosApi({'method': 'POST', 'url': \"api/public/login\", data: user});\n            const auth = await resp.data;\n            localStorage.setItem('token','Bearer ' + auth.accessToken);\n            localStorage.setItem('expiresIn', auth.expiresIn);\n            localStorage.setItem('user', JSON.stringify(auth.userDetails));\n            navigate(from, {replace: true});\n        } catch (error) {\n            setAlert(\"Invalid credentials\");\n            setError(true);\n        }\n    }\n\n    const register = async (user) => {\n        try {\n            const resp = await axiosApi({'method': 'POST', 'url': \"api/public/register\", data: user});\n            setAlert(\"Your account was created successfully\");\n            setSuccess(true);\n            setToggleSignIn(true);\n        } catch (err) {\n            setAlert(\"Failed to create account!Please try again later\");\n            setError(true);\n        }\n\n    }\n\n    const resetAlert = () => {\n        setAlert('');\n        setSuccess(false);\n        setError(false);\n    }\n\n\n    const checkIn = {error, success, alert, toggleSignIn, switchCheckIn, login,register, resetAlert}\n    return (\n        <CheckInContext.Provider value={checkIn}>\n            {props.children}\n        </CheckInContext.Provider>\n    );\n}\n\n\nexport const useCheckInProps = () => {\n    return React.useContext(CheckInContext);\n}"],"mappings":";;;AAAA,OAAOA,KAAK,IAAGC,QAAQ,QAAO,OAAO;AACrC,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAAQC,WAAW,EAAEC,WAAW,QAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1D,MAAMC,cAAc,gBAAGP,KAAK,CAACQ,aAAa,CAAC,IAAI,CAAC;AAEhD,OAAO,MAAMC,eAAe,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAEtC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGf,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,KAAK,CAACC,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAEtD,MAAMmB,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAC9B,MAAMiB,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAG9B,MAAMmB,aAAa,GAAIC,KAAK,IAAK;IAC7BV,QAAQ,CAAC,KAAK,CAAC;IACfE,UAAU,CAAC,KAAK,CAAC;IACjBI,eAAe,CAACI,KAAK,CAAC;EAC1B,CAAC;EAED,MAAMC,KAAK,GAAG,MAAOC,IAAI,IAAK;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IAC1B,IAAIC,IAAI,GAAG,EAAAF,eAAA,GAAAL,QAAQ,CAACQ,KAAK,cAAAH,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBE,IAAI,cAAAD,oBAAA,uBAApBA,oBAAA,CAAsBG,QAAQ,KAAI,OAAO;IACpD,IAAI;MACAC,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACT,IAAI,CAAC,CAAC;MACjC,MAAMU,IAAI,GAAG,MAAMjC,QAAQ,CAAC;QAAC,QAAQ,EAAE,MAAM;QAAE,KAAK,EAAE,kBAAkB;QAAEkC,IAAI,EAAEX;MAAI,CAAC,CAAC;MACtF,MAAMY,IAAI,GAAG,MAAMF,IAAI,CAACC,IAAI;MAC5BE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAC,SAAS,GAAGF,IAAI,CAACG,WAAW,CAAC;MAC1DF,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEF,IAAI,CAACI,SAAS,CAAC;MACjDH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEN,IAAI,CAACC,SAAS,CAACG,IAAI,CAACK,WAAW,CAAC,CAAC;MAC9DtB,QAAQ,CAACQ,IAAI,EAAE;QAACe,OAAO,EAAE;MAAI,CAAC,CAAC;IACnC,CAAC,CAAC,OAAO/B,KAAK,EAAE;MACZK,QAAQ,CAAC,qBAAqB,CAAC;MAC/BJ,QAAQ,CAAC,IAAI,CAAC;IAClB;EACJ,CAAC;EAED,MAAM+B,QAAQ,GAAG,MAAOnB,IAAI,IAAK;IAC7B,IAAI;MACA,MAAMU,IAAI,GAAG,MAAMjC,QAAQ,CAAC;QAAC,QAAQ,EAAE,MAAM;QAAE,KAAK,EAAE,qBAAqB;QAAEkC,IAAI,EAAEX;MAAI,CAAC,CAAC;MACzFR,QAAQ,CAAC,uCAAuC,CAAC;MACjDF,UAAU,CAAC,IAAI,CAAC;MAChBI,eAAe,CAAC,IAAI,CAAC;IACzB,CAAC,CAAC,OAAO0B,GAAG,EAAE;MACV5B,QAAQ,CAAC,iDAAiD,CAAC;MAC3DJ,QAAQ,CAAC,IAAI,CAAC;IAClB;EAEJ,CAAC;EAED,MAAMiC,UAAU,GAAGA,CAAA,KAAM;IACrB7B,QAAQ,CAAC,EAAE,CAAC;IACZF,UAAU,CAAC,KAAK,CAAC;IACjBF,QAAQ,CAAC,KAAK,CAAC;EACnB,CAAC;EAGD,MAAMkC,OAAO,GAAG;IAACnC,KAAK;IAAEE,OAAO;IAAEE,KAAK;IAAEE,YAAY;IAAEI,aAAa;IAAEE,KAAK;IAACoB,QAAQ;IAAEE;EAAU,CAAC;EAChG,oBACIxC,OAAA,CAACC,cAAc,CAACyC,QAAQ;IAACzB,KAAK,EAAEwB,OAAQ;IAAAE,QAAA,EACnCvC,KAAK,CAACuC;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACM,CAAC;AAElC,CAAC;AAAA1C,EAAA,CA3DYF,eAAe;EAAA,QAOPL,WAAW,EACXD,WAAW;AAAA;AAAAmD,EAAA,GARnB7C,eAAe;AA8D5B,OAAO,MAAM8C,eAAe,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACjC,OAAOxD,KAAK,CAACyD,UAAU,CAAClD,cAAc,CAAC;AAC3C,CAAC;AAAAiD,GAAA,CAFYD,eAAe;AAAA,IAAAD,EAAA;AAAAI,YAAA,CAAAJ,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}